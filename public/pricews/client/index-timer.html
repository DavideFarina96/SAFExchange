<!-- index.html -->
<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html>
<head>
    <!-- META -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

    <title>SAFExchange</title>   

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><!-- load jquery -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>

<body class="row">
	<h3 id="timer">TIMER: </h3>
    <div class="col-xs-5">	
		<h2>BTC VALUES: </h1>
		<ul id="valuesBTC">
		</ul>
	</div>

    <div class="col-xs-5">
			<h2>ETH VALUES: </h1>
			<ul id="valuesETH">

			</ul>
		</div>
	

	<script>
		var domain = "http://localhost:8085";
		var hasAjaxRespondedBTC = true;
		var cnt = 0;

		$(document).ready(function() {
			startTimer();
		});

		function startTimer()
		{
			var start = new Date;

			setInterval(function() {
				document.getElementById("timer").innerText = "TIMER: " + ((new Date - start) / 1000 + " Seconds");
				 updateCurrencyBTCUSD();
				// updateCurrencyETHUSD();
			}, 3000);
		}

		function updateCurrencyBTCUSD()
		{
			if(hasAjaxRespondedBTC)
			{
				hasAjaxRespondedBTC = false;
				$.ajax({
					url: domain + '/BTCUSD',      // server path
					method: 'GET',                  // http method to access the resource
					success: function (data) {
						document.getElementById("valuesBTC").innerHTML += data;
						hasAjaxRespondedBTC = true;
						cnt++;
						console.log(cnt);
					},
					error: function (jqXHR, exception) {
						console.log("Error: " + jqXHR.responseText);
						hasAjaxRespondedBTC = true;
						cnt+=100;
						console.log(cnt);
					}
				});
			}
		}

		function updateCurrencyETHUSD()
		{
			$.ajax({
				url: domain + '/ETHUSD',      // server path
				method: 'GET',                  // http method to access the resource
				success: function (data) {
					document.getElementById("valuesETH").innerHTML += data;
				},
				error: function (jqXHR, exception) {
					console.log("Error: " + jqXHR.responseText);
				}
			});
		}
	</script>
</body>
</html>	
